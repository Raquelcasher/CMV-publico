<!DOCTYPE html>
<html lang="es">

<!--
HTML
web o pagina:
entorno: curso Accenture-CMV
autor: Raquel Castellano Hernández
fecha: Mayo 2021
-->

<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>

	
	  
	<!-- importante SEO para la etiqueta del navegador -->
	<title>Webstorage</title>
	
	<!-- una fuente de Google -->
	<link rel="preconnect" href="https://fonts.gstatic.com"/>
	<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&display=swap" rel="stylesheet"/>
	
	
	<!-- una hoja de estilos personalizada-->
	<link href="00-modelo.css" rel="stylesheet"/>
	
	<!-- iconos u otros elementos externos -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
	

	<!-- solo aquellos estilos que solo aplican a esta pagina -->
    <style>
		* {
			font-family: 'Nunito', sans-serif;
		}
		
		body {
			padding-top: 100px;
			background: rgba(0, 0, 128, 0.1); /* Azul al 10% */
		}
		.topnav {
		  overflow: hidden;
		  background-color: #333;
		}

		.topnav a {
		  float: left;
		  color: #f2f2f2;
		  text-align: center;
		  padding: 14px 16px;
		  text-decoration: none;
		  font-size: 17px;
		}

		.topnav a:hover {
		  background-color: #ddd;
		  color: black;
		}

		.topnav a.active {
		  background-color: #04AA6D;
		  color: white;
		}
	</style>
	
	<!-- scripts externos de librerias que usaremos, por ejemplo Bootstrap o JQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<link href="design.css" rel="stylesheet"/>
	<!-- scripts Javascript o JQuery -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
	<!-- scripts externos de desarrollo propio en Javascript o JQuery -->
	<!-- Estilos fuente de titulo -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=BioRhyme:wght@200&display=swap" rel="stylesheet">
	<!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<!-- scripts personalizados Javascript o JQuery -->

</head>


<body onload="cargaPagina()">
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<!-- cabecera de pagina -->
	<header>
		<h1>Ejercicios JavaScript</h1>
		<h2>Registro usuario 28 de Mayo</h2>
		<h3>Usted es: <span id="msgUsr"></span></h3>
		<br/>
	</header>
	<nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
		 	<a class="navbar-brand" href="#">
		 		<h1>Raquel Castellano</h1>
		 	</a>
		  	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
		    	<span class="navbar-toggler-icon"></span>
		  	</button>
		  	<div class="collapse navbar-collapse" id="navbarNavDropdown">
		    	<ul class="navbar-nav">
			      	<div class="topnav" id="up">
					  <a class="active" href="#home">Home</a>
					  <a href="#contact">Contact</a>
					</div>
					<div class="topnav" id="down">
					  <a href="#home">Home</a>
					  <a class="active"href="#contact">Contact</a>
					</div>
			    </ul>	
		  	</div>
		</nav>
	</div>
	<!-- Botón para cambiar de color -->
	<main>
		<!-- Botón para cambiar de color -->

		<section id="acceso">
			<p>Por favor registrese en el sistema:</p>
			<br/>
			<input type="text" id="usr" name="usuario" maxlength="10" placeholder="(usr)">
			<button onclick="registrar()">REGISTRAR</button>
		</section>
		<section id="desconectar">
			<button onclick="desconectar()">Desconectar</button>
		</section>
		<p>Elija su color de fondo:</p>
		<br/>
		<input type="color" id="micolor" name="favcolor" value="#9e9e9e">
		<button onclick="cambiarColor()">Aplicar color de fondo</button>

	</main>
	

	<script>
		function cargaPagina(){
			iniColorFondo();
			mostrarUsuario();
		}
		function registrar(){
			sessionStorage.setItem("usuarioLogueado",$("#usr").val());
			mostrarUsuario();
		}
		function desconectar(){
			sessionStorage.removeItem("usuarioLogueado");
			location.reload();
			
		}
		function mostrarUsuario(){
			if(sessionStorage.getItem("usuarioLogueado")){
				$("#msgUsr").text(sessionStorage.getItem("usuarioLogueado"));
				$("#acceso").hide();
				$("#desconectar").show();
				$("#up").hide();
				$("#down").show();
			}else{
				$("#acceso").show();
				$("#desconectar").hide();
				$("#down").hide();
				$("#up").show();
			}
		}
		function cambiarColor() {
			// obtengo el color de la elección del formulario
			let colorFondo=$("#micolor").val();
			
			// aplico el color al fondo de la pagina
			$("body").css("background-color",colorFondo);

			// lo recuerdo de forma permanente
			localStorage.setItem("colorDeFondo",colorFondo);

			// para recordar solo hasta que finalice la sesion
			// sessionStorage.setItem("colorDeFondo",colorFondo);
			

		}
		function iniColorFondo(){
			if (localStorage.getItem("colorDeFondo")){
				$("body").css("background-color",localStorage.getItem("colorDeFondo"));
			}
		}
		
	</script>
	<footer>
		<br/><br/><br/>
		<p>Volver <a href="../index.html">al menú</a></p>
		<div>&copy; 2020 <a target="_blank">Alum. Raquel Castellano Hernández</a></div>
	</footer>

</body>
</html>